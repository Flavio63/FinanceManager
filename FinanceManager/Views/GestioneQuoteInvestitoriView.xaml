<UserControl x:Class="FinanceManager.Views.GestioneQuoteInvestitoriView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:is="http://schemas.microsoft.com/expression/2010/interactions"
             xmlns:iy="http://schemas.microsoft.com/expression/2010/interactivity"
             xmlns:local="clr-namespace:FinanceManager.Views"
             mc:Ignorable="d" Name="_GestioneQuoteInvestitoriView"
             d:DesignHeight="450" d:DesignWidth="800">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="50"/>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.65*"/>
            <ColumnDefinition Width="0.35*"/>
        </Grid.ColumnDefinitions>
        <TextBlock Grid.ColumnSpan="2" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="26" FontWeight="Bold">
                DISPONIBILITA' E QUOTE PER INVESTITORE
        </TextBlock>
        <Button Content="X" Command="{Binding CloseMeCommand}" 
                CommandParameter="{Binding ElementName=_GestioneQuoteInvestitoriView}" 
                HorizontalContentAlignment="Center" Grid.Column="2" HorizontalAlignment="Right"
                    VerticalContentAlignment="Center" Width="25" Height="25"
                Margin="0,0, 15, 0"/>
        <GroupBox Grid.Row="1" Grid.Column="1" FontWeight="Bold" Header="Scegli cosa vuoi fare" BorderBrush="Blue" 
                      Margin="5">
            <StackPanel Orientation="Vertical" Margin="5">
                <RadioButton GroupName="CosaFare" Margin="5" Content="Aggiungere Capitale" FontWeight="Normal" FontSize="20" Command="{Binding CosaFai}" CommandParameter="Aggiungere"/>
                <RadioButton GroupName="CosaFare" Margin="5" Content="Prendere Capitale" FontWeight="Normal" FontSize="20" Command="{Binding CosaFai}" CommandParameter="Togliere"/>
                <RadioButton GroupName="CosaFare" Margin="5" Content="Giroconto" FontWeight="Normal" FontSize="20" Command="{Binding CosaFai}" CommandParameter="Giroconto"/>
                <RadioButton GroupName="CosaFare" Margin="5" Content="Prelievo Guadagni" FontWeight="Normal" FontSize="20" Command="{Binding CosaFai}" CommandParameter="Insert"/>
            </StackPanel>
        </GroupBox>
        <DataGrid Grid.Row="1" Grid.Column="0" ItemsSource="{Binding ListQuote, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
                      AlternatingRowBackground="Azure" Margin="5"
                      AutoGenerateColumns="False" RowHeaderWidth="10" ColumnHeaderHeight="40" FontSize="25" FontWeight="Bold" CanUserAddRows="False" CanUserDeleteRows="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Investitore" Binding="{Binding NomeInvestitore, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"
                                        IsReadOnly="True" FontSize="22" FontWeight="Bold"/>
                <DataGridTextColumn Header="Disponibilità" Binding="{Binding Ammontare, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, 
                        ConverterCulture=it-IT, StringFormat=C2}"
                                        IsReadOnly="True" FontSize="22" FontWeight="Bold">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="HorizontalAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Quote" Binding="{Binding Quota, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, 
                        ConverterCulture=it-IT, StringFormat={}{0}%}"
                                        IsReadOnly="True" FontSize="22" FontWeight="Bold">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="HorizontalAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Totale" Binding="{Binding Totale, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, 
                        ConverterCulture=it-IT, StringFormat=C2}"
                                        IsReadOnly="True" FontSize="22" FontWeight="Bold">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="HorizontalAlignment" Value="Right"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Visibility="{Binding Visibility1_2, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
                    Grid.Row="2" Grid.Column="0" Orientation="Horizontal" Margin="5" HorizontalAlignment="Left" 
                    VerticalAlignment="Top">
            <StackPanel Orientation="Vertical" Margin="5">
                <TextBlock Text="Seleziona l' Investitore" FontSize="18" FontWeight="Bold" Margin="5, 5, 5, 0"/>
                <ComboBox Style="{StaticResource FormComboStyle}" FontSize="16" Margin="5, 0, 5, 5"
                          ItemsSource="{Binding ListInvestitore, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" 
                          DisplayMemberPath="Nome" SelectedValuePath="IdInvestitore" >
                    <iy:Interaction.Triggers>
                        <iy:EventTrigger EventName="SelectionChanged">
                            <is:CallMethodAction TargetObject="{Binding}" MethodName="CbSelectionChanged"/>
                        </iy:EventTrigger>
                    </iy:Interaction.Triggers>
                </ComboBox>
            </StackPanel>
            <StackPanel Orientation="Vertical" Margin="5">
                <TextBlock Name="labelAmmo" Text="Ammontare" FontSize="18" FontWeight="Bold" Margin="5, 5, 5, 0"/>
                <TextBox FontSize="16" Margin="5, 0, 5, 5" Height="28" HorizontalAlignment="Right"
                         Width="{Binding Path=Width, ElementName=labelAmmo}">
                    <iy:Interaction.Triggers>
                        <iy:EventTrigger EventName="LostFocus">
                            <is:CallMethodAction TargetObject="{Binding}" MethodName="LostFocus"/>
                        </iy:EventTrigger>
                        <iy:EventTrigger EventName="PreviewKeyDown">
                            <is:CallMethodAction TargetObject="{Binding}" MethodName="PreviewKeyDown"/>
                        </iy:EventTrigger>
                    </iy:Interaction.Triggers>
                </TextBox>
            </StackPanel>
            <StackPanel Orientation="Vertical" Margin="5">
                <TextBlock Text="Note eventuali" FontSize="18" FontWeight="Bold" Margin="5, 5, 5, 0"/>
                <TextBox FontSize="14" AcceptsReturn="True" TextWrapping="Wrap" MinWidth="250" Height="75">
                    <iy:Interaction.Triggers>
                        <iy:EventTrigger EventName="LostFocus">
                            <is:CallMethodAction TargetObject="{Binding}" MethodName="LostFocus"/>
                        </iy:EventTrigger>
                    </iy:Interaction.Triggers>
                </TextBox>
            </StackPanel>
        </StackPanel>
        
        <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Vertical" Margin="5" VerticalAlignment="Bottom">
            <Button Content="Conferma" Margin="15" FontSize="16" FontWeight="Bold" Height="35"/>
            <Button Content="Annulla" Margin="15" FontSize="16" FontWeight="Bold" Height="35"/>
        </StackPanel>
    </Grid>
</UserControl>
